<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GreenCheck - Healthy Food Scanner</title>
    <meta name="description" content="Scan food barcodes to check their health status and find healthier alternatives. Make informed choices with GreenCheck." />
    <meta name="author" content="Lovable AI & Human Refinement" />

    <meta property="og:title" content="GreenCheck - Healthy Food Scanner" />
    <meta property="og:description" content="Scan food barcodes to check their health status and find healthier alternatives." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="images/greencheck-og-image.png" /> <!-- UPDATE: Placeholder for a branded image -->

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@YourTwitterHandle" /> <!-- Update with actual handle -->
    <meta name="twitter:title" content="GreenCheck - Healthy Food Scanner" />
    <meta name="twitter:description" content="Scan food barcodes to check their health status and find healthier alternatives." />
    <meta name="twitter:image" content="images/greencheck-twitter-image.png" /> <!-- UPDATE: Placeholder for a branded image -->

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet"> <!-- Added 800 weight -->

    <!-- Toastify CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

    <!-- Local CSS -->
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* Minimal style to prevent FOUC - Updated */
      #main-nav, #barcode-form-section, #header, #product-card-container, #alternatives-container, #footer, #loading-indicator {
          opacity: 0;
          visibility: hidden;
      }
      /* Classes added by JS will make them visible */
       #main-nav.visible, #barcode-form-section.visible, #header.visible, #product-card-container.visible, #alternatives-container.visible, #footer.visible, #loading-indicator.visible {
          opacity: 1;
          visibility: visible;
      }

      /* Scanner View - Initially Hidden */
      #scanner-container {
        display: none; /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        flex-direction: column; /* To stack video and button */
      }
      #scanner-container.active {
        display: flex; /* Show when active */
      }
      /* Style the container for Quagga to inject into */
      #scanner-container .drawingBuffer { /* Canvas added by Quagga */
        position: absolute;
        top: 0;
        left: 0;
      }
       #scanner-container video { /* Video added by Quagga */
        width: 90%;
        max-width: 600px;
        max-height: 70vh; /* Limit height */
        border: 3px solid var(--primary-color);
        border-radius: 8px;
        background-color: #333; /* Fallback bg */
      }
      #cancel-scan-button {
         margin-top: 20px;
         /* Use existing kawaii-button styles */
         padding: 10px 25px;
         font-size: 1rem;
         background-color: var(--accent-color-alt);
         color: var(--text-color-dark); /* White text */
         border: none;
         border-radius: 25px;
         cursor: pointer;
         transition: background-color 0.2s ease;
      }
      #cancel-scan-button:hover {
         background-color: #e63946; /* Slightly darker red on hover */
      }
      #cancel-scan-button i {
        margin-right: 8px;
      }

    </style>
</head>
<body>
    <div id="root">
        <!-- Navigation Header (no changes) -->
        <nav id="main-nav" aria-label="Main navigation">
            <div class="nav-content">
                <a href="/" class="nav-logo">
                    <i data-lucide="leaf"></i>
                    <span>GreenCheck</span>
                </a>
                <div class="nav-links-container">
                    <ul class="nav-links" id="nav-menu-links">
                        <li><a href="#" class="active">Scanner</a></li>
                        <li><a href="#">Dashboard</a></li>
                        <li><a href="#">About</a></li>
                    </ul>
                </div>
                 <button id="mobile-menu-toggle" class="mobile-menu-button" aria-label="Toggle menu" aria-expanded="false">
                    <i data-lucide="menu" class="menu-icon"></i>
                    <i data-lucide="x" class="close-icon"></i>
                </button>
            </div>
        </nav>

        <main>
            <!-- Barcode Form Section (no changes to structure) -->
            <section id="barcode-form-section" aria-labelledby="form-heading">
                 <h2 id="form-heading">Ready to Scan?</h2>
                 <p class="section-subtitle">Enter a barcode below or use your camera!</p>

                 <div id="barcode-form-container" class="card-style interactive-card">
                    <form id="barcode-form">
                        <div class="input-wrapper">
                           <i data-lucide="search" class="icon"></i>
                           <label for="barcode-input" class="sr-only">Enter Barcode</label>
                            <input
                                type="text"
                                id="barcode-input"
                                placeholder="Enter product barcode..."
                                class="kawaii-input"
                                aria-label="Product barcode input"
                            />
                        </div>
                        <button type="submit" class="kawaii-button primary gradient-button">
                            <i data-lucide="check-circle" style="width: 20px; height: 20px;"></i>
                            Check
                        </button>
                    </form>

                    <div class="action-buttons">
                        <button id="scan-button" class="kawaii-button secondary pulse-button">
                            <i data-lucide="camera" style="width: 18px; height: 18px;"></i>
                            Scan Barcode
                        </button>
                         <input type="file" id="upload-input" accept="image/*" class="sr-only" aria-label="Upload image file">
                        <button id="upload-button" class="kawaii-button secondary">
                            <i data-lucide="upload" style="width: 18px; height: 18px;"></i>
                            Upload Image
                        </button>
                    </div>

                    <div class="example-buttons-container">
                        <p>Need inspiration? Try an example:</p>
                        <div id="example-buttons" class="example-buttons">
                            <!-- Example buttons will be added here by JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Header Section (no changes) -->
            <header id="header">
                <p class="subtitle informative-subtitle">Get instant health scores & discover nutritious alternatives for your food.</p>
            </header>

            <!-- Loading Indicator (no changes) -->
            <div id="loading-indicator" aria-live="polite" aria-busy="true">
                <div class="spinner"></div>
                <p>Checking product...</p>
            </div>

            <!-- Product Card Placeholder (no changes) -->
            <section id="product-card-container" aria-live="polite">
                <!-- Product card HTML will be injected here -->
            </section>

            <!-- Alternatives Placeholder (no changes) -->
            <section id="alternatives-container" aria-live="polite">
                <!-- Alternatives HTML will be injected here -->
            </section>

        </main>

        <!-- Footer (no changes) -->
        <footer id="footer">
             <div class="footer-content">
                <div class="footer-top">
                    <div class="footer-logo">
                        <i data-lucide="leaf"></i>
                        <span>GreenCheck</span>
                    </div>
                    <nav class="footer-links" aria-label="Footer navigation">
                        <a href="#">About</a>
                        <a href="#">Database</a>
                        <a href="#">Privacy</a>
                        <a href="#">Contact</a>
                    </nav>
                </div>
                 <div class="footer-middle">
                     <div class="footer-tagline">
                         <i data-lucide="sparkles" class="icon"></i>
                         <span>Eat healthy, feel happy!</span>
                    </div>
                    <div class="footer-socials" aria-label="Social media links">
                        <a href="#" aria-label="GreenCheck on Twitter" title="Twitter">
                            <i data-lucide="twitter"></i>
                        </a>
                        <a href="#" aria-label="GreenCheck on Instagram" title="Instagram">
                            <i data-lucide="instagram"></i>
                        </a>
                         <a href="#" aria-label="GreenCheck on Facebook" title="Facebook">
                            <i data-lucide="facebook"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>Â© <span id="current-year"></span> GreenCheck. All rights reserved.</p>
                     <p class="footer-credits">Vibrant UI by Your Friendly AI Assistant.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scanner View Container -->
    <div id="scanner-container">
        <!-- Quagga will inject video and canvas here -->
        <button id="cancel-scan-button" class="kawaii-button">
            <i data-lucide="x-circle"></i> Cancel Scan
        </button>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <!-- *** ADDED: QuaggaJS Library *** -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Main Application Script (Module) -->
    <script type="module" src="js/main.js"></script>

</body>
</html>